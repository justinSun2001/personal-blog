import{h as V,a as v}from"./index.D4oiYhMT.js";import{d as w,k as P,A as c,S as f,c as h,o as k,Q as n,a,r as i,J as C}from"./vendor.b7dnWdBk.js";const R=w({name:"Register",setup(s,{emit:r}){const p=P(),l=c({email:"",username:"",pass:"",checkPass:""}),t=c({email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],pass:[{validator:(u,o,e)=>{if(!o)e(new Error("请输入密码"));else{if(new RegExp("(?=.*[0-9])(?=.*[a-zA-Z]).{8,30}").test(o)||e(new Error("密码必须包含字母和数字，且不少于8个字符")),l.checkPass!==""){if(!p.value)return;p.value.validateField("checkPass")}e()}},trigger:"blur"}],checkPass:[{validator:(u,o,e)=>{o===""?e(new Error("请再次输入密码")):o!==l.pass?e(new Error("密码不一致")):e()},trigger:"blur"}]});return{ruleFormRef:p,ruleForm:l,rules:t,submitForm:u=>{u&&u&&u.validate(o=>{if(o){const e=new FormData;e.append("email",l.email),e.append("username",l.username),e.append("pass",l.pass),V.post("/user/register",e).then(d=>{f.success("注册成功，请登录!"),console.log(d),r("changeActive")}).catch(function(d){f.error(d.response.data.message)})}else f.error("输入表单数据有误，请检查")})}}}});function _(s,r,p,l,g,F){const t=i("el-input"),m=i("el-form-item"),u=i("el-button"),o=i("el-form");return k(),h(o,{model:s.ruleForm,"status-icon":"",rules:s.rules,ref:"ruleFormRef",class:"demo-ruleForm"},{default:n(()=>[a(m,{prop:"email"},{default:n(()=>[a(t,{modelValue:s.ruleForm.email,"onUpdate:modelValue":r[0]||(r[0]=e=>s.ruleForm.email=e),placeholder:"邮箱"},null,8,["modelValue"])]),_:1}),a(m,{prop:"username"},{default:n(()=>[a(t,{modelValue:s.ruleForm.username,"onUpdate:modelValue":r[1]||(r[1]=e=>s.ruleForm.username=e),placeholder:"用户名"},null,8,["modelValue"])]),_:1}),a(m,{prop:"pass"},{default:n(()=>[a(t,{type:"password",modelValue:s.ruleForm.pass,"onUpdate:modelValue":r[2]||(r[2]=e=>s.ruleForm.pass=e),placeholder:"密码",autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(m,{prop:"checkPass"},{default:n(()=>[a(t,{type:"password",modelValue:s.ruleForm.checkPass,"onUpdate:modelValue":r[3]||(r[3]=e=>s.ruleForm.checkPass=e),placeholder:"确认密码",autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(u,{type:"primary",onClick:r[4]||(r[4]=e=>s.submitForm(s.ruleFormRef))},{default:n(()=>r[5]||(r[5]=[C(" 注册 ")])),_:1})]),_:1},8,["model","rules"])}const b=v(R,[["render",_],["__scopeId","data-v-dc634e87"]]);export{b as default};
