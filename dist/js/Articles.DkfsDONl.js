import{d as f,k as o,v as y,B as b,y as B,u as D,l as m,m as c,F as v,E as w,w as z,a as $,r as h,o as u,t as A,D as N,c as S}from"./vendor.b7dnWdBk.js";import{T as I}from"./TopBar.B5C0Mg6G.js";import{h as C,a as P}from"./index.D4oiYhMT.js";const E=f({name:"ArticlesContent",props:{currentPage:{type:Number,required:!0}},setup(e){const t=o(0),r=o(15),l=o(0),i=o(0),p=o([]),n=o([]),s=D(),d=B(),g=async()=>{t.value=d.state.articleCount,l.value=t.value-e.currentPage*r.value>0?t.value-e.currentPage*r.value-1:0,i.value=t.value-(e.currentPage-1)*r.value;for(let a=t.value-1;a>=0;a--){const _=await C.get("/catalog/articlesData");n.value[a]=_[a]._id;const k=await C.get(`/catalog/articlesData/${n.value[a]}`);p.value[a]=k.article.summary}};return y(g),b(()=>e.currentPage,g),{total:t,pageSize:r,start:l,end:i,summary:p,items:n,itemClick:a=>{const _=n.value[t.value-a-1-(e.currentPage-1)*r.value];s.push({path:`/articles/${_}`})},handleCurrentChange:a=>{s.push({path:`/articleList/${a}`}),g()}}}}),F={class:"main"},L={class:"text-container"},R=["onClick"],T={class:"pageIndex"};function V(e,t,r,l,i,p){const n=h("el-pagination");return u(),m(v,null,[c("div",F,[(u(!0),m(v,null,w(e.summary.slice(e.start,e.end).reverse(),(s,d)=>(u(),m("div",{class:"text-right",key:d},[c("div",L,[c("a",{class:"text",onClick:g=>e.itemClick(d)},z(s),9,R)])]))),128))]),c("div",T,[$(n,{background:"",layout:"prev, pager, next",onCurrentChange:e.handleCurrentChange,"current-page":e.currentPage,"page-size":e.pageSize,total:e.total},null,8,["onCurrentChange","current-page","page-size","total"])])],64)}const q=P(E,[["render",V],["__scopeId","data-v-f50711fd"]]),M=f({name:"ArticlePage",components:{ArticlesContent:q,TopBar:I},setup(){const e=N();return{currentPage:A(()=>Number(e.params.id))}}}),U={class:"top"},j={class:"page"};function G(e,t,r,l,i,p){const n=h("top-bar"),s=h("articles-content");return u(),m(v,null,[c("div",U,[$(n,{inUse2:!0})]),c("div",j,[(u(),S(s,{currentPage:e.currentPage,key:e.currentPage},null,8,["currentPage"]))])],64)}const W=P(M,[["render",G],["__scopeId","data-v-0e8b416f"]]);export{W as default};
