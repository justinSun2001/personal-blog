var P=Object.defineProperty;var V=(l,t,s)=>t in l?P(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s;var g=(l,t,s)=>V(l,typeof t!="symbol"?t+"":t,s);import{B as E,G as $,q as O,d as F,k as c,A as L,H as z,v as W,z as H,I as K,l as m,m as o,a as j,J as q,L as k,w as r,N as T,F as y,E as N,O as G,P as J,o as h}from"./vendor.b7dnWdBk.js";import{T as Q}from"./TopBar.B5C0Mg6G.js";import{a as X}from"./index.D4oiYhMT.js";class Y{constructor(){g(this,"socket",null);g(this,"messageCallback",()=>{});g(this,"heartbeatInterval",null);g(this,"HEARTBEAT_INTERVAL",3e4);g(this,"HEARTBEAT_TIMEOUT",5e3);g(this,"heartbeatTimer",null)}connect(t){this.socket=new WebSocket(t),this.socket.onopen=()=>{console.log("Connected to WebSocket server"),this.startHeartbeat()},this.socket.onmessage=s=>{var d;s.data==="pong"?(console.log("Received pong, resetting heartbeat"),this.resetHeartbeat()):s.data==="ping"?(console.log("Received ping, sending pong"),(d=this.socket)==null||d.send("pong")):(console.log("Received message:",s.data),this.messageCallback&&this.messageCallback(s.data))},this.socket.onclose=()=>{console.log("Disconnected from WebSocket server"),this.stopHeartbeat()},this.socket.onerror=s=>{console.error("WebSocket error:",s)}}startHeartbeat(){this.socket&&(console.log("Starting heartbeat..."),this.heartbeatInterval=setInterval(()=>{var t;((t=this.socket)==null?void 0:t.readyState)===WebSocket.OPEN?(console.log("Sending ping to server"),this.socket.send("ping"),this.heartbeatTimer=setTimeout(()=>{var s;console.log("Connection timeout, closing WebSocket"),(s=this.socket)==null||s.close()},this.HEARTBEAT_TIMEOUT)):console.log("WebSocket not open, cannot send ping")},this.HEARTBEAT_INTERVAL))}resetHeartbeat(){console.log("Received pong, resetting timeout"),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)}onMessage(t){console.log("onMessage",t),this.messageCallback=t}sendMessage(t){this.socket&&this.socket.readyState===WebSocket.OPEN?this.socket.send(t):console.error("WebSocket is not open")}close(){this.socket&&(this.socket.close(),this.stopHeartbeat())}}function Z(...l){const t=typeof l[0]=="string"?window:l.shift();let s=()=>{};const d=E(()=>O(t),a=>{s(),a&&(a.addEventListener(...l),s=()=>a.removeEventListener(...l))},{immediate:!0});return $(()=>{s()}),()=>{s(),d()}}const ee={class:"top"},te={style:{"margin-top":"54px"}},oe={class:"chat"},se={class:"messages"},ne={"element-loading-text":"Loading...",style:{display:"inline-block"}},ae=["onClick"],le=F({__name:"NbaData",setup(l){const t=c(0),s=c(0),d=()=>{t.value++},a=L({name:"zhangsan",age:18});E(t,(n,e)=>{console.log("count 改变了"),console.log(n,e),t.value>2&&console.log("太大了")},{immediate:!0,deep:!0}),z(()=>{console.log(`count 的值是${t.value}`),console.log(`count2 的值是${s.value}`),console.log(`user 的值是${a.name}`)}),E(a,(n,e)=>{console.log(n),console.log(e),console.log(`user 的值是${n.name}`)},{immediate:!1,deep:!1});const v=new Y,S=c([]),p=c("");W(()=>{v.connect("ws://localhost:8080"),v.onMessage(n=>{S.value.push(n)})});const A=()=>{p.value.trim()!==""&&(v.sendMessage(p.value),p.value="")};H(()=>{v.close()});const w=c(1),M=c(10),b=c(!1),x=async n=>new Promise(e=>{setTimeout(()=>{console.log(`Fetching data for page ${n}`),w.value=n,e()},500)}),B=async n=>{b.value=!0;try{await x(n)}catch(e){console.error("Error fetching data:",e)}finally{b.value=!1}},f=L({name:[1,2,3]}),{name:D}=K(f),_=()=>{f.name=[2,2,3],console.log(D.value)},C=c(0);let u=null;W(()=>{u=new Worker(new URL(""+new URL("../assets/webworker-DocvSf1l.js",import.meta.url).href,import.meta.url),{type:"module"}),u.onmessage=n=>{C.value=n.data,console.log("Worker Response:",n.data)},setInterval(()=>{u==null||u.postMessage({})},1e3)}),H(()=>{u&&u.terminate()});const I=c();return Z(I,"click",()=>{console.count("click")}),(n,e)=>{const U=J("loading");return h(),m(y,null,[o("div",ee,[j(Q)]),o("div",te,[o("p",null,"计数器:"+r(t.value),1),o("button",{onClick:d},"+"),o("p",null,"计数器二:"+r(s.value),1),o("button",{onClick:e[0]||(e[0]=i=>s.value++)},"+"),e[5]||(e[5]=o("br",null,null,-1)),q(" "+r(typeof a.name)+" ",1),o("p",null,"变化:"+r(a.age),1),k(o("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>a.age=i)},null,512),[[T,a.age]]),o("p",null,"变化:"+r(a.name),1),k(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=i=>a.name=i)},null,512),[[T,a.name,void 0,{number:!0}]]),o("div",oe,[e[4]||(e[4]=o("h2",null,"WebSocket Chat",-1)),o("div",se,[(h(!0),m(y,null,N(S.value,(i,R)=>(h(),m("div",{key:R,class:"message"},r(i),1))),128))]),k(o("input",{"onUpdate:modelValue":e[3]||(e[3]=i=>p.value=i),onKeyup:G(A,["enter"]),placeholder:"Type a message..."},null,544),[[T,p.value]])]),e[6]||(e[6]=o("h2",null,"分页防抖/节流",-1)),o("h3",null,r(w.value),1),k((h(),m("div",ne,[(h(!0),m(y,null,N(M.value,i=>(h(),m("button",{key:i,style:{cursor:"pointer"},onClick:R=>B(i)},r(i),9,ae))),128))])),[[U,b.value]]),e[7]||(e[7]=o("h2",null,"reactive结构赋值",-1)),o("p",null,r(f.name),1),o("button",{onClick:_},"Change Name"),e[8]||(e[8]=o("h2",null,"webworker",-1)),e[9]||(e[9]=o("div",{class:"circle"},null,-1)),o("p",null,"List Length: "+r(C.value),1),e[10]||(e[10]=o("h2",null,"钩子函数",-1)),o("div",{style:{height:"200px",width:"200px","background-color":"beige"},ref_key:"el",ref:I},null,512)])],64)}}}),de=X(le,[["__scopeId","data-v-552a75a5"]]);export{de as default};
